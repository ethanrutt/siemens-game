name: Jest Test Runner

on:
  push:
    branches:
      - dev-all-naveed
  pull_request:
    branches:
      - dev-all
      - master-all

env:
  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
  AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}

jobs:
  test:
    name: Setup AWS Credentials
    permissions: write-all
    runs-on: ubuntu-latest

    steps:
      - name: Check if env variable is set after fetching secrets
        run: if [ -z ${AWS_ACCESS_KEY_ID+x} ]; then echo "AWS_ACCESS_KEY_ID is unset"; else echo "AWS_ACCESS_KEY_ID is set"; fi

  # test:
  #   name: Run GetAllItems
  #   permissions: write-all
  #   runs-on: ubuntu-latest
  #
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v4
  #
  #     - name: Setup Node
  #       uses: actions/setup-node@v3
  #       with:
  #         node-version: '14'
  #         cache: npm
  #         cache-dependency-path: "backend/LambdaFunctionAPIs/GetAllItems/package-lock.json"
  #
  #     - name: Install Shared Deps
  #       working-directory: backend/LambdaFunctionAPIs/shared
  #       run: npm install
  #
  #     - name: Install Test Deps
  #       working-directory: backend/LambdaFunctionAPIs/GetAllItems
  #       run: npm install
  #
  #     - name: Run Jest Tests
  #       working-directory: backend/LambdaFunctionAPIs/GetAllItems
  #       run: npm test
  #
