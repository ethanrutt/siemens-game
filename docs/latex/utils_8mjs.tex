\doxysection{backend/\+Lambda\+Function\+APIs/shared/utils.mjs File Reference}
\hypertarget{utils_8mjs}{}\label{utils_8mjs}\index{backend/LambdaFunctionAPIs/shared/utils.mjs@{backend/LambdaFunctionAPIs/shared/utils.mjs}}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{utils_8mjs_a59be084da8908b7d77ff34b25cd84488}{import}} \{ Secrets\+Manager\+Client, Get\+Secret\+Value\+Command \} from \textquotesingle{}@aws-\/sdk/client-\/secrets-\/manager\textquotesingle{}
\item 
\mbox{\hyperlink{_equip_2src_2index_8mjs_a59be084da8908b7d77ff34b25cd84488}{import}} pkg from \mbox{\hyperlink{utils_8mjs_a1162b8fff7159c57d1e00179b39da966}{pg}}
\item 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \{ Client \} = pkg
\item 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b}{DBCREDENTIALS}}
\item 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{utils_8mjs_a417b5eff0e338b080a36d75e82da9ba6}{secret\+\_\+name}} = "{}rds!cluster-\/88080b8d-\/e111-\/4714-\/8ce4-\/0c8ef81b966d"{}
\item 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{utils_8mjs_afdd2b8e6fe1c732729aa13573e4bc134}{get\+Secret}}
\item 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{utils_8mjs_a025520d777e24dc89c6f4852b5d9dc63}{create\+Db\+Client}}
\end{DoxyCompactItemize}


\doxysubsection{Variable Documentation}
\Hypertarget{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}\index{utils.mjs@{utils.mjs}!const@{const}}
\index{const@{const}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{const}{const}}
{\footnotesize\ttfamily \label{utils_8mjs_a92b303b76a3f942ea819498907d5e83c} 
const \{ Client \} = pkg}

\Hypertarget{utils_8mjs_a025520d777e24dc89c6f4852b5d9dc63}\index{utils.mjs@{utils.mjs}!createDbClient@{createDbClient}}
\index{createDbClient@{createDbClient}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{createDbClient}{createDbClient}}
{\footnotesize\ttfamily \label{utils_8mjs_a025520d777e24dc89c6f4852b5d9dc63} 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} create\+Db\+Client}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (credentials)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ Client(\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ host:\ \mbox{\hyperlink{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b}{DBCREDENTIALS}}.host,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ user:\ credentials.username,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ password:\ credentials.password,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ database:\ \mbox{\hyperlink{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b}{DBCREDENTIALS}}.database,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ port:\ \mbox{\hyperlink{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b}{DBCREDENTIALS}}.port,}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b}\index{utils.mjs@{utils.mjs}!DBCREDENTIALS@{DBCREDENTIALS}}
\index{DBCREDENTIALS@{DBCREDENTIALS}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{DBCREDENTIALS}{DBCREDENTIALS}}
{\footnotesize\ttfamily \label{utils_8mjs_ae1afe02c2008c028f7c4f1ad7403ab6b} 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} DBCREDENTIALS}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ \ \ host:\ \textcolor{stringliteral}{"{}seimensgame.cluster-\/ro-\/cby6ieo44z27.us-\/east-\/1.rds.amazonaws.com"{}},\ \ }
\DoxyCodeLine{\ \ \ \ port:\ 5432,}
\DoxyCodeLine{\ \ \ \ database:\ \textcolor{stringliteral}{"{}seimensgame"{}},}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{utils_8mjs_afdd2b8e6fe1c732729aa13573e4bc134}\index{utils.mjs@{utils.mjs}!getSecret@{getSecret}}
\index{getSecret@{getSecret}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{getSecret}{getSecret}}
{\footnotesize\ttfamily \label{utils_8mjs_afdd2b8e6fe1c732729aa13573e4bc134} 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} get\+Secret}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (secretName)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ console.log(\textcolor{stringliteral}{"{}Creating\ Secrets\ Manager\ Client"{}});}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ client\ =\ \textcolor{keyword}{new}\ SecretsManagerClient(\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ region:\ \textcolor{stringliteral}{"{}us-\/east-\/1"{}},}
\DoxyCodeLine{\ \ \ \ \});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.log(\textcolor{stringliteral}{"{}Fetching\ secret"{}});}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ response\ =\ await\ client.send(}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ GetSecretValueCommand(\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SecretId:\ secretName,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VersionStage:\ \textcolor{stringliteral}{"{}AWSCURRENT"{}},\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \})}
\DoxyCodeLine{\ \ \ \ \ \ \ \ );}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ secret\ =\ JSON.parse(response.SecretString);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ secret;}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (error)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ console.log(\textcolor{stringliteral}{"{}Error\ fetching\ secret:"{}},\ error);}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ error;}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\Hypertarget{utils_8mjs_a59be084da8908b7d77ff34b25cd84488}\index{utils.mjs@{utils.mjs}!import@{import}}
\index{import@{import}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{import}{import}}
{\footnotesize\ttfamily \label{utils_8mjs_a59be084da8908b7d77ff34b25cd84488} 
import \{ Secrets\+Manager\+Client, Get\+Secret\+Value\+Command \} from \textquotesingle{}@aws-\/sdk/client-\/secrets-\/manager\textquotesingle{}}

\Hypertarget{utils_8mjs_a1162b8fff7159c57d1e00179b39da966}\index{utils.mjs@{utils.mjs}!pg@{pg}}
\index{pg@{pg}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{pg}{pg}}
{\footnotesize\ttfamily \label{utils_8mjs_a1162b8fff7159c57d1e00179b39da966} 
\mbox{\hyperlink{_equip_2src_2index_8mjs_a59be084da8908b7d77ff34b25cd84488}{import}} pkg from pg}

\Hypertarget{utils_8mjs_a417b5eff0e338b080a36d75e82da9ba6}\index{utils.mjs@{utils.mjs}!secret\_name@{secret\_name}}
\index{secret\_name@{secret\_name}!utils.mjs@{utils.mjs}}
\doxysubsubsection{\texorpdfstring{secret\_name}{secret\_name}}
{\footnotesize\ttfamily \label{utils_8mjs_a417b5eff0e338b080a36d75e82da9ba6} 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} secret\+\_\+name = "{}rds!cluster-\/88080b8d-\/e111-\/4714-\/8ce4-\/0c8ef81b966d"{}}

