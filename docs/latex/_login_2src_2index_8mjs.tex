\doxysection{backend/\+Lambda\+Function\+APIs/\+Login/src/index.mjs File Reference}
\hypertarget{_login_2src_2index_8mjs}{}\label{_login_2src_2index_8mjs}\index{backend/LambdaFunctionAPIs/Login/src/index.mjs@{backend/LambdaFunctionAPIs/Login/src/index.mjs}}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_login_2src_2index_8mjs_a59be084da8908b7d77ff34b25cd84488}{import}} \{ \mbox{\hyperlink{utils_8mjs_afdd2b8e6fe1c732729aa13573e4bc134}{get\+Secret}}, \mbox{\hyperlink{utils_8mjs_a025520d777e24dc89c6f4852b5d9dc63}{create\+Db\+Client}}, \mbox{\hyperlink{utils_8mjs_a417b5eff0e338b080a36d75e82da9ba6}{secret\+\_\+name}} \} from \textquotesingle{}./shared/utils.\+mjs\textquotesingle{}
\item 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{_login_2src_2index_8mjs_aeab3ea5ee96b304b3a3c90c7d6c0243e}{validate\+Login\+Credentials}}
\item 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{_login_2src_2index_8mjs_a540eb48d351195fd0e0632d08ed192d4}{create\+User}}
\item 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{_login_2src_2index_8mjs_a84b9117dcb6396a86d0d18941f526c57}{error\+Check}}
\item 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} \mbox{\hyperlink{_login_2src_2index_8mjs_a696ed2287cb97f6b73ce36a583c4102d}{handler}}
\end{DoxyCompactItemize}


\doxysubsection{Variable Documentation}
\Hypertarget{_login_2src_2index_8mjs_a540eb48d351195fd0e0632d08ed192d4}\index{index.mjs@{index.mjs}!createUser@{createUser}}
\index{createUser@{createUser}!index.mjs@{index.mjs}}
\doxysubsubsection{\texorpdfstring{createUser}{createUser}}
{\footnotesize\ttfamily \label{_login_2src_2index_8mjs_a540eb48d351195fd0e0632d08ed192d4} 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} create\+User}

Creates a new user in the database.


\begin{DoxyParams}{Parameters}
{\em \{\+Object\}} & client -\/ Postgre\+SQL client for database operations. \\
\hline
{\em \{string\}} & employee\+\_\+id -\/ The employee ID for the new user. \\
\hline
{\em \{string\}} & user\+\_\+name -\/ The username for the new user. \\
\hline
{\em \{string\}} & user\+\_\+password -\/ The password for the new user. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Promise$<$\+Object$>$\} -\/ Resolves with the newly created user\textquotesingle{}s details. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em \{\+Error\}} & -\/ Throws an error if the employee ID is invalid or already exists. \\
\hline
\end{DoxyExceptions}
\Hypertarget{_login_2src_2index_8mjs_a84b9117dcb6396a86d0d18941f526c57}\index{index.mjs@{index.mjs}!errorCheck@{errorCheck}}
\index{errorCheck@{errorCheck}!index.mjs@{index.mjs}}
\doxysubsubsection{\texorpdfstring{errorCheck}{errorCheck}}
{\footnotesize\ttfamily \label{_login_2src_2index_8mjs_a84b9117dcb6396a86d0d18941f526c57} 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} error\+Check}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ (event)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (!event.body)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Request\ body\ is\ missing.'});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ requestBody\ =\ JSON.parse(event.body);}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ \{\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ user\_name,\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ user\_password,\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ employee\_id\ }
\DoxyCodeLine{\ \ \ \ \}\ =\ requestBody;}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (!user\_name\ ||\ !user\_password)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Missing\ required\ parameters:\ user\_name\ or\ user\_password.'});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ \{\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ user\_name,\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ user\_password,\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ employee\_id\ }
\DoxyCodeLine{\ \ \ \ \};}
\DoxyCodeLine{\}}

\end{DoxyCode}
Validates and extracts required parameters from the event request.


\begin{DoxyParams}{Parameters}
{\em \{\+Object\}} & event -\/ The Lambda event object. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Object\} -\/ Returns the extracted parameters. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em \{\+Error\}} & -\/ Throws an error if required parameters are missing or invalid. \\
\hline
\end{DoxyExceptions}
\Hypertarget{_login_2src_2index_8mjs_a696ed2287cb97f6b73ce36a583c4102d}\index{index.mjs@{index.mjs}!handler@{handler}}
\index{handler@{handler}!index.mjs@{index.mjs}}
\doxysubsubsection{\texorpdfstring{handler}{handler}}
{\footnotesize\ttfamily \label{_login_2src_2index_8mjs_a696ed2287cb97f6b73ce36a583c4102d} 
export \mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} handler}

Lambda function handler for user login and signup.


\begin{DoxyParams}{Parameters}
{\em \{\+Object\}} & event -\/ The Lambda event object containing request data. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Promise$<$\+Object$>$\} -\/ Returns a response object with HTTP status and user details. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em \{\+Error\}} & -\/ Throws an error if request parameters are invalid or database operations fail. \\
\hline
\end{DoxyExceptions}
\Hypertarget{_login_2src_2index_8mjs_a59be084da8908b7d77ff34b25cd84488}\index{index.mjs@{index.mjs}!import@{import}}
\index{import@{import}!index.mjs@{index.mjs}}
\doxysubsubsection{\texorpdfstring{import}{import}}
{\footnotesize\ttfamily \label{_login_2src_2index_8mjs_a59be084da8908b7d77ff34b25cd84488} 
import \{ \mbox{\hyperlink{utils_8mjs_afdd2b8e6fe1c732729aa13573e4bc134}{get\+Secret}}, \mbox{\hyperlink{utils_8mjs_a025520d777e24dc89c6f4852b5d9dc63}{create\+Db\+Client}}, \mbox{\hyperlink{utils_8mjs_a417b5eff0e338b080a36d75e82da9ba6}{secret\+\_\+name}} \} from \textquotesingle{}./shared/utils.\+mjs\textquotesingle{}}

\Hypertarget{_login_2src_2index_8mjs_aeab3ea5ee96b304b3a3c90c7d6c0243e}\index{index.mjs@{index.mjs}!validateLoginCredentials@{validateLoginCredentials}}
\index{validateLoginCredentials@{validateLoginCredentials}!index.mjs@{index.mjs}}
\doxysubsubsection{\texorpdfstring{validateLoginCredentials}{validateLoginCredentials}}
{\footnotesize\ttfamily \label{_login_2src_2index_8mjs_aeab3ea5ee96b304b3a3c90c7d6c0243e} 
\mbox{\hyperlink{utils_8mjs_a92b303b76a3f942ea819498907d5e83c}{const}} validate\+Login\+Credentials}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (client,\ user\_name,\ user\_password)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ query\ =\ \`{}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ SELECT\ *\ FROM\ users\ }
\DoxyCodeLine{\ \ \ \ \ \ \ \ WHERE\ user\_name\ =\ \$1\ AND\ user\_password\ =\ \$2}
\DoxyCodeLine{\ \ \ \ \`{};}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ values\ =\ [user\_name,\ user\_password];}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ result\ =\ await\ client.query(query,\ values);}
\DoxyCodeLine{\ \ \ \ console.log(\`{}Login\ validation\ \textcolor{keywordflow}{for}\ user\ \textcolor{stringliteral}{'\$\{user\_name\}'}\ completed.\`{});}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (result.rows.length\ >\ 0)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result.rows[0];\ }
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ Error(\textcolor{stringliteral}{'Invalid\ credentials.'});}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
Validates user login credentials by checking the database.


\begin{DoxyParams}{Parameters}
{\em \{\+Object\}} & client -\/ Postgre\+SQL client for database operations. \\
\hline
{\em \{string\}} & user\+\_\+name -\/ The username to validate. \\
\hline
{\em \{string\}} & user\+\_\+password -\/ The password to validate. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{Promise$<$\+Object$>$\} -\/ Resolves with user details if credentials are valid. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em \{\+Error\}} & -\/ Throws an error if credentials are invalid or query fails. \\
\hline
\end{DoxyExceptions}
